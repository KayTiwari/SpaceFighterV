{"ast":null,"code":"import _objectSpread from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/src/AppContext.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nvar todoAxios = axios.create();\ntodoAxios.interceptors.request.use(function (config) {\n  var token = localStorage.getItem('token');\n  config.headers.Authorization = \"Bearer \".concat(token);\n  return config;\n});\nvar AppContext = React.createContext();\nexport var AppContextProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AppContextProvider, _Component);\n\n  function AppContextProvider() {\n    var _this;\n\n    _classCallCheck(this, AppContextProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppContextProvider).call(this));\n\n    _this.signup = function (userInfo) {\n      return axios.post('/auth/signup', userInfo).then(function (response) {\n        var _response$data = response.data,\n            user = _response$data.user,\n            token = _response$data.token;\n        localStorage.setItem('user', user);\n        localStorage.setItem('token', token);\n\n        _this.setState({\n          user: user,\n          token: token\n        });\n\n        return response;\n      });\n    };\n\n    _this.login = function (credentials) {\n      return axios.post('/auth/login', credentials).then(function (response) {\n        var _response$data2 = response.data,\n            token = _response$data2.token,\n            user = _response$data2.user;\n        localStorage.setItem('user', JSON.stringify(user));\n        localStorage.setItem('token', token);\n\n        _this.setState({\n          user: user,\n          token: token\n        });\n\n        return response;\n      });\n    };\n\n    _this.logout = function () {\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n\n      _this.setState({\n        scores: [],\n        user: {},\n        token: \"\"\n      });\n    };\n\n    _this.getScores = function () {\n      todoAxios.get(\"/api/scores\").then(function (response) {\n        _this.setState({\n          score: response.data\n        });\n\n        console.log(response.data);\n        return response;\n      });\n    };\n\n    _this.postScores = function (newScore) {\n      return todoAxios.post(\"/api/scores/\", newScore).then(function (response) {\n        _this.setState(function (prevState) {\n          return {\n            score: [].concat(_toConsumableArray(prevState.score), [response.data])\n          };\n        });\n\n        return response;\n      });\n    };\n\n    _this.deleteScores = function (id) {\n      todoAxios.delete(\"/api/scores/\".concat(id)).then(function (response) {\n        console.log(id);\n\n        _this.setState(function (prevState) {\n          return {\n            score: prevState.score.filter(function (score) {\n              return score._id !== id;\n            })\n          };\n        });\n      });\n    };\n\n    _this.state = {\n      score: [],\n      user: JSON.parse(localStorage.getItem('user')) || {},\n      token: localStorage.getItem('token') || ''\n    };\n    return _this;\n  }\n\n  _createClass(AppContextProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppContext.Provider, {\n        value: _objectSpread({\n          getScores: this.getScores,\n          postScores: this.postScores,\n          deleteScores: this.deleteScores,\n          signup: this.signup,\n          login: this.login,\n          logout: this.logout\n        }, this.state),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return AppContextProvider;\n}(Component);\nexport var withProvider = function withProvider(Component) {\n  return function (props) {\n    return React.createElement(AppContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, function (globalState) {\n      return React.createElement(Component, Object.assign({}, globalState, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/abhiktiwari/dev/assignments/projects/invisi/client/src/AppContext.js"],"names":["React","Component","axios","todoAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","AppContext","createContext","AppContextProvider","signup","userInfo","post","then","response","data","user","setItem","setState","login","credentials","JSON","stringify","logout","removeItem","scores","getScores","get","score","console","log","postScores","newScore","prevState","deleteScores","id","delete","filter","_id","state","parse","props","children","withProvider","globalState"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nconst todoAxios = axios.create();\n\ntodoAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem('token')\n    config.headers.Authorization = `Bearer ${token}`\n    return config\n})\n\nconst AppContext = React.createContext();\n\nexport class AppContextProvider extends Component {\n    constructor() {\n        super()\n        this.state = {\n            score: [],\n            user: JSON.parse(localStorage.getItem('user')) || {},\n            token: localStorage.getItem('token') || ''\n        }\n    }\n\n    signup = userInfo => {\n        return axios.post('/auth/signup', userInfo)\n            .then(response => {\n                const { user, token } = response.data\n                localStorage.setItem('user', user)\n                localStorage.setItem('token', token)\n                this.setState({\n                    user,\n                    token\n                })\n                return response\n            })\n        }\n\n    login = credentials => {\n        return axios.post('/auth/login', credentials)\n            .then(response => {\n                const {token, user} = response.data\n                localStorage.setItem('user', JSON.stringify(user))\n                localStorage.setItem('token', token)\n                this.setState({\n                    user,\n                    token\n                })\n                return response;\n            })\n    }\n\n    logout = () => {\n        localStorage.removeItem(\"user\");\n        localStorage.removeItem(\"token\");\n        this.setState({\n            scores: [],\n            user: {},\n            token: \"\"\n        })\n    }\n\n    \n\n    getScores = () => {\n        todoAxios.get(\"/api/scores\")\n            .then(response => {\n                this.setState({ score: response.data });\n                console.log(response.data);\n                return response;\n            })\n    }\n\n    postScores = (newScore) => {\n        return todoAxios.post(\"/api/scores/\", newScore)\n            .then(response => {\n                this.setState(prevState => {\n                    return { score: [...prevState.score, response.data] }\n                });\n                return response;\n            })\n    }\n\n\n    deleteScores = id => {\n        todoAxios.delete(`/api/scores/${id}`).then(response => {\n            console.log(id);\n            this.setState(prevState => ({\n                score: prevState.score.filter(score => score._id !== id)\n            }))\n        })\n    }\n\n    render() {\n        return (\n            <AppContext.Provider\n                value={{\n                    getScores: this.getScores,\n                    postScores: this.postScores,\n                    deleteScores: this.deleteScores,\n                    signup: this.signup,\n                    login: this.login,\n                    logout: this.logout,\n                    ...this.state\n                }}\n            >\n\n                {this.props.children}\n\n            </AppContext.Provider>\n        )\n    }\n}\n\n\nexport const withProvider = Component => {\n    return props => {\n        return (\n            <AppContext.Consumer>\n                {\n                    globalState => {\n                        return (\n                            <Component\n                                {...globalState}\n                                {...props}\n                            />\n                        )\n                    }\n                }\n            </AppContext.Consumer>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}