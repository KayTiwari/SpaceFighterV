{"ast":null,"code":"import _objectSpread from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/src/AppContext.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nvar todoAxios = axios.create();\ntodoAxios.interceptors.request.use(function (config) {\n  var token = localStorage.getItem('token');\n  config.headers.Authorization = \"Bearer \".concat(token);\n  return config;\n});\nvar AppContext = React.createContext();\nexport var AppContextProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AppContextProvider, _Component);\n\n  function AppContextProvider() {\n    var _this;\n\n    _classCallCheck(this, AppContextProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppContextProvider).call(this));\n\n    _this.signup = function (userInfo) {\n      console.log('fired');\n      return axios.post('/auth/signup', userInfo).then(function (response) {\n        var _response$data = response.data,\n            user = _response$data.user,\n            token = _response$data.token;\n        localStorage.setItem('user', user);\n        localStorage.setItem('token', token);\n\n        _this.setState({\n          user: user,\n          token: token\n        });\n\n        return response;\n      });\n    };\n\n    _this.login = function (credentials) {\n      return axios.post('/auth/login', credentials).then(function (response) {\n        var _response$data2 = response.data,\n            token = _response$data2.token,\n            user = _response$data2.user;\n        localStorage.setItem('user', JSON.stringify(user));\n        localStorage.setItem('token', token);\n\n        _this.setState({\n          user: user,\n          token: token\n        });\n\n        return response;\n      });\n    };\n\n    _this.logout = function () {\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n\n      _this.setState({\n        todos: [],\n        user: {},\n        token: \"\"\n      });\n    };\n\n    _this.getTodos = function () {\n      return todoAxios.get(\"/api/todo\").then(function (response) {\n        _this.setState({\n          todos: response.data\n        });\n\n        return response;\n      });\n    };\n\n    _this.addTodo = function (newTodo) {\n      return todoAxios.post(\"/api/todo/\", newTodo).then(function (response) {\n        _this.setState(function (prevState) {\n          return {\n            todos: [].concat(_toConsumableArray(prevState.todos), [response.data])\n          };\n        });\n\n        return response;\n      });\n    };\n\n    _this.editTodo = function (todoId, todo) {\n      return todoAxios.put(\"/api/todo/\".concat(todoId), todo).then(function (response) {\n        _this.setState(function (prevState) {\n          var updatedTodos = prevState.todos.map(function (todo) {\n            return todo._id === response.data._id ? response.data : todo;\n          });\n          return {\n            todos: updatedTodos\n          };\n        });\n\n        return response;\n      });\n    };\n\n    _this.deleteTodo = function (todoId) {\n      return todoAxios.delete(\"/api/todo/\".concat(todoId)).then(function (response) {\n        _this.setState(function (prevState) {\n          var updatedTodos = prevState.todos.filter(function (todo) {\n            return todo._id !== todoId;\n          });\n          return {\n            todos: updatedTodos\n          };\n        });\n\n        return response;\n      });\n    };\n\n    _this.state = {\n      scores: [],\n      user: JSON.parse(localStorage.getItem('user')) || {},\n      token: localStorage.getItem('token') || ''\n    };\n    return _this;\n  }\n\n  _createClass(AppContextProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppContext.Provider, {\n        value: _objectSpread({\n          getTodos: this.getTodos,\n          addTodo: this.addTodo,\n          editTodo: this.editTodo,\n          deleteTodo: this.deleteTodo,\n          signup: this.signup,\n          login: this.login,\n          logout: this.logout\n        }, this.state),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return AppContextProvider;\n}(Component);\nexport var withProvider = function withProvider(Component) {\n  return function (props) {\n    return React.createElement(AppContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, function (globalState) {\n      return React.createElement(Component, Object.assign({}, globalState, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/abhiktiwari/dev/assignments/projects/invisi/client/src/AppContext.js"],"names":["React","Component","axios","todoAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","AppContext","createContext","AppContextProvider","signup","userInfo","console","log","post","then","response","data","user","setItem","setState","login","credentials","JSON","stringify","logout","removeItem","todos","getTodos","get","addTodo","newTodo","prevState","editTodo","todoId","todo","put","updatedTodos","map","_id","deleteTodo","delete","filter","state","scores","parse","props","children","withProvider","globalState"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nconst todoAxios = axios.create();\n\ntodoAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem('token')\n    config.headers.Authorization = `Bearer ${token}`\n    return config\n})\n\nconst AppContext = React.createContext();\n\nexport class AppContextProvider extends Component {\n    constructor() {\n        super()\n        this.state = {\n            scores: [],\n            user: JSON.parse(localStorage.getItem('user')) || {},\n            token: localStorage.getItem('token') || ''\n        }\n    }\n\n    signup = userInfo => {\n        console.log('fired')\n        return axios.post('/auth/signup', userInfo)\n            .then(response => {\n                const { user, token } = response.data\n                localStorage.setItem('user', user)\n                localStorage.setItem('token', token)\n                this.setState({\n                    user,\n                    token\n                })\n                return response\n            })\n        }\n\n    login = credentials => {\n        return axios.post('/auth/login', credentials)\n            .then(response => {\n                const {token, user} = response.data\n                localStorage.setItem('user', JSON.stringify(user))\n                localStorage.setItem('token', token)\n                this.setState({\n                    user,\n                    token\n                })\n                return response;\n            })\n    }\n\n    logout = () => {\n        localStorage.removeItem(\"user\");\n        localStorage.removeItem(\"token\");\n        this.setState({\n            todos: [],\n            user: {},\n            token: \"\"\n        })\n    }\n\n    getTodos = () => {\n        return todoAxios.get(\"/api/todo\")\n            .then(response => {\n                this.setState({ todos: response.data });\n                return response;\n            })\n    }\n\n    addTodo = (newTodo) => {\n        return todoAxios.post(\"/api/todo/\", newTodo)\n            .then(response => {\n                this.setState(prevState => {\n                    return { todos: [...prevState.todos, response.data] }\n                });\n                return response;\n            })\n    }\n\n    editTodo = (todoId, todo) => {\n        return todoAxios.put(`/api/todo/${todoId}`, todo)\n            .then(response => {\n                this.setState(prevState => {\n                    const updatedTodos = prevState.todos.map(todo => {\n                        return todo._id === response.data._id ? response.data : todo\n                    })\n                    return { todos: updatedTodos }\n                })\n                return response;\n            })\n    }\n\n    deleteTodo = (todoId) => {\n        return todoAxios.delete(`/api/todo/${todoId}`)\n            .then(response => {\n                this.setState(prevState => {\n                    const updatedTodos = prevState.todos.filter(todo => {\n                        return todo._id !== todoId\n                    })\n                    return { todos: updatedTodos }\n                })\n                return response;\n            })\n    }\n\n    render() {\n        return (\n            <AppContext.Provider\n                value={{\n                    getTodos: this.getTodos,\n                    addTodo: this.addTodo,\n                    editTodo: this.editTodo,\n                    deleteTodo: this.deleteTodo,\n                    signup: this.signup,\n                    login: this.login,\n                    logout: this.logout,\n                    ...this.state\n                }}\n            >\n\n                {this.props.children}\n\n            </AppContext.Provider>\n        )\n    }\n}\n\n\nexport const withProvider = Component => {\n    return props => {\n        return (\n            <AppContext.Consumer>\n                {\n                    globalState => {\n                        return (\n                            <Component\n                                {...globalState}\n                                {...props}\n                            />\n                        )\n                    }\n                }\n            </AppContext.Consumer>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}