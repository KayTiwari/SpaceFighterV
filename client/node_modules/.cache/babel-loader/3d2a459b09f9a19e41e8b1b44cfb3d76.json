{"ast":null,"code":"import _objectSpread from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/abhiktiwari/dev/assignments/projects/invisi/client/src/AppContext.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nvar scoreAxios = axios.create();\ntodoAxios.interceptors.request.use(function (config) {\n  var token = localStorage.getItem('token');\n  config.headers.Authorization = \"Bearer \".concat(token);\n  return config;\n});\nvar AppContext = React.createContext();\nexport var AppContextProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AppContextProvider, _Component);\n\n  function AppContextProvider() {\n    var _this;\n\n    _classCallCheck(this, AppContextProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppContextProvider).call(this));\n\n    _this.signup = function (userInfo) {\n      return axios.post('/auth/signup', userInfo).then(function (response) {\n        var _response$data = response.data,\n            user = _response$data.user,\n            token = _response$data.token;\n        localStorage.setItem('user', user);\n        localStorage.setItem('token', token);\n\n        _this.setState({\n          user: user,\n          token: token\n        });\n\n        return response;\n      });\n    };\n\n    _this.login = function (credentials) {\n      return axios.post('auth/login', credentials).then(function (response) {\n        var _response$data2 = response.data,\n            token = _response$data2.token,\n            user = _response$data2.user;\n        localStorage.setItem('user', JSON.stringify(user));\n        localStorage.setItem('token', token);\n\n        _this.setState({\n          user: user,\n          token: token\n        });\n\n        _this.getTodos();\n\n        return response;\n      });\n    };\n\n    _this.getTodos = function () {\n      return todoAxios.get(\"/api/todo\").then(function (response) {\n        _this.setState({\n          todos: response.data\n        });\n\n        return response;\n      });\n    };\n\n    _this.addTodo = function (newTodo) {\n      return todoAxios.post(\"/api/todo/\", newTodo).then(function (response) {\n        _this.setState(function (prevState) {\n          return {\n            todos: [].concat(_toConsumableArray(prevState.todos), [response.data])\n          };\n        });\n\n        return response;\n      });\n    };\n\n    _this.editTodo = function (todoId, todo) {\n      return todoAxios.put(\"/api/todo/\".concat(todoId), todo).then(function (response) {\n        _this.setState(function (prevState) {\n          var updatedTodos = prevState.todos.map(function (todo) {\n            return todo._id === response.data._id ? response.data : todo;\n          });\n          return {\n            todos: updatedTodos\n          };\n        });\n\n        return response;\n      });\n    };\n\n    _this.deleteTodo = function (todoId) {\n      return todoAxios.delete(\"/api/todo/\".concat(todoId)).then(function (response) {\n        _this.setState(function (prevState) {\n          var updatedTodos = prevState.todos.filter(function (todo) {\n            return todo._id !== todoId;\n          });\n          return {\n            todos: updatedTodos\n          };\n        });\n\n        return response;\n      });\n    };\n\n    _this.state = {\n      scores: [],\n      user: JSON.parse(localStorage.getItem('user')) || {},\n      token: localStorage.getItem('token') || ''\n    };\n    return _this;\n  }\n\n  _createClass(AppContextProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getTodos();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppContext.Provider, {\n        value: _objectSpread({\n          getTodos: this.getTodos,\n          addTodo: this.addTodo,\n          editTodo: this.editTodo,\n          deleteTodo: this.deleteTodo,\n          signup: this.signup,\n          login: this.login\n        }, this.state),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return AppContextProvider;\n}(Component);\nexport var withProvider = function withProvider(Component) {\n  return function (props) {\n    return React.createElement(AppContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, function (globalState) {\n      return React.createElement(Component, Object.assign({}, globalState, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/abhiktiwari/dev/assignments/projects/invisi/client/src/AppContext.js"],"names":["React","Component","axios","scoreAxios","create","todoAxios","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","AppContext","createContext","AppContextProvider","signup","userInfo","post","then","response","data","user","setItem","setState","login","credentials","JSON","stringify","getTodos","get","todos","addTodo","newTodo","prevState","editTodo","todoId","todo","put","updatedTodos","map","_id","deleteTodo","delete","filter","state","scores","parse","props","children","withProvider","globalState"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,UAAU,GAAGD,KAAK,CAACE,MAAN,EAAnB;AAEAC,SAAS,CAACC,YAAV,CAAuBC,OAAvB,CAA+BC,GAA/B,CAAmC,UAAAC,MAAM,EAAI;AACzC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAH,EAAAA,MAAM,CAACI,OAAP,CAAeC,aAAf,oBAAyCJ,KAAzC;AACA,SAAOD,MAAP;AACH,CAJD;AAMA,IAAMM,UAAU,GAAGf,KAAK,CAACgB,aAAN,EAAnB;AAEA,WAAaC,kBAAb;AAAA;AAAA;AAAA;;AACI,gCAAc;AAAA;;AAAA;;AACV;;AADU,UAadC,MAbc,GAaL,UAAAC,QAAQ,EAAI;AACjB,aAAOjB,KAAK,CAACkB,IAAN,CAAW,cAAX,EAA2BD,QAA3B,EACFE,IADE,CACG,UAAAC,QAAQ,EAAI;AAAA,6BACUA,QAAQ,CAACC,IADnB;AAAA,YACNC,IADM,kBACNA,IADM;AAAA,YACAd,KADA,kBACAA,KADA;AAEdC,QAAAA,YAAY,CAACc,OAAb,CAAqB,MAArB,EAA6BD,IAA7B;AACAb,QAAAA,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8Bf,KAA9B;;AACA,cAAKgB,QAAL,CAAc;AACVF,UAAAA,IAAI,EAAJA,IADU;AAEVd,UAAAA,KAAK,EAALA;AAFU,SAAd;;AAIA,eAAOY,QAAP;AACH,OAVE,CAAP;AAWC,KAzBS;;AAAA,UA2BdK,KA3Bc,GA2BN,UAAAC,WAAW,EAAI;AACnB,aAAO1B,KAAK,CAACkB,IAAN,CAAW,YAAX,EAAyBQ,WAAzB,EACFP,IADE,CACG,UAAAC,QAAQ,EAAI;AAAA,8BACQA,QAAQ,CAACC,IADjB;AAAA,YACPb,KADO,mBACPA,KADO;AAAA,YACAc,IADA,mBACAA,IADA;AAEdb,QAAAA,YAAY,CAACc,OAAb,CAAqB,MAArB,EAA6BI,IAAI,CAACC,SAAL,CAAeN,IAAf,CAA7B;AACAb,QAAAA,YAAY,CAACc,OAAb,CAAqB,OAArB,EAA8Bf,KAA9B;;AACA,cAAKgB,QAAL,CAAc;AACVF,UAAAA,IAAI,EAAJA,IADU;AAEVd,UAAAA,KAAK,EAALA;AAFU,SAAd;;AAIA,cAAKqB,QAAL;;AACA,eAAOT,QAAP;AACH,OAXE,CAAP;AAYH,KAxCa;;AAAA,UA0CdS,QA1Cc,GA0CH,YAAM;AACb,aAAO1B,SAAS,CAAC2B,GAAV,CAAc,WAAd,EACFX,IADE,CACG,UAAAC,QAAQ,EAAI;AACd,cAAKI,QAAL,CAAc;AAAEO,UAAAA,KAAK,EAAEX,QAAQ,CAACC;AAAlB,SAAd;;AACA,eAAOD,QAAP;AACH,OAJE,CAAP;AAKH,KAhDa;;AAAA,UAkDdY,OAlDc,GAkDJ,UAACC,OAAD,EAAa;AACnB,aAAO9B,SAAS,CAACe,IAAV,CAAe,YAAf,EAA6Be,OAA7B,EACFd,IADE,CACG,UAAAC,QAAQ,EAAI;AACd,cAAKI,QAAL,CAAc,UAAAU,SAAS,EAAI;AACvB,iBAAO;AAAEH,YAAAA,KAAK,+BAAMG,SAAS,CAACH,KAAhB,IAAuBX,QAAQ,CAACC,IAAhC;AAAP,WAAP;AACH,SAFD;;AAGA,eAAOD,QAAP;AACH,OANE,CAAP;AAOH,KA1Da;;AAAA,UA4Dde,QA5Dc,GA4DH,UAACC,MAAD,EAASC,IAAT,EAAkB;AACzB,aAAOlC,SAAS,CAACmC,GAAV,qBAA2BF,MAA3B,GAAqCC,IAArC,EACFlB,IADE,CACG,UAAAC,QAAQ,EAAI;AACd,cAAKI,QAAL,CAAc,UAAAU,SAAS,EAAI;AACvB,cAAMK,YAAY,GAAGL,SAAS,CAACH,KAAV,CAAgBS,GAAhB,CAAoB,UAAAH,IAAI,EAAI;AAC7C,mBAAOA,IAAI,CAACI,GAAL,KAAarB,QAAQ,CAACC,IAAT,CAAcoB,GAA3B,GAAiCrB,QAAQ,CAACC,IAA1C,GAAiDgB,IAAxD;AACH,WAFoB,CAArB;AAGA,iBAAO;AAAEN,YAAAA,KAAK,EAAEQ;AAAT,WAAP;AACH,SALD;;AAMA,eAAOnB,QAAP;AACH,OATE,CAAP;AAUH,KAvEa;;AAAA,UAyEdsB,UAzEc,GAyED,UAACN,MAAD,EAAY;AACrB,aAAOjC,SAAS,CAACwC,MAAV,qBAA8BP,MAA9B,GACFjB,IADE,CACG,UAAAC,QAAQ,EAAI;AACd,cAAKI,QAAL,CAAc,UAAAU,SAAS,EAAI;AACvB,cAAMK,YAAY,GAAGL,SAAS,CAACH,KAAV,CAAgBa,MAAhB,CAAuB,UAAAP,IAAI,EAAI;AAChD,mBAAOA,IAAI,CAACI,GAAL,KAAaL,MAApB;AACH,WAFoB,CAArB;AAGA,iBAAO;AAAEL,YAAAA,KAAK,EAAEQ;AAAT,WAAP;AACH,SALD;;AAMA,eAAOnB,QAAP;AACH,OATE,CAAP;AAUH,KApFa;;AAEV,UAAKyB,KAAL,GAAa;AACTC,MAAAA,MAAM,EAAE,EADC;AAETxB,MAAAA,IAAI,EAAEK,IAAI,CAACoB,KAAL,CAAWtC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,KAA4C,EAFzC;AAGTF,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC;AAH/B,KAAb;AAFU;AAOb;;AARL;AAAA;AAAA,wCAUwB;AAChB,WAAKmB,QAAL;AACH;AAZL;AAAA;AAAA,6BAuFa;AACL,aACI,oBAAC,UAAD,CAAY,QAAZ;AACI,QAAA,KAAK;AACDA,UAAAA,QAAQ,EAAE,KAAKA,QADd;AAEDG,UAAAA,OAAO,EAAE,KAAKA,OAFb;AAGDG,UAAAA,QAAQ,EAAE,KAAKA,QAHd;AAIDO,UAAAA,UAAU,EAAE,KAAKA,UAJhB;AAKD1B,UAAAA,MAAM,EAAE,KAAKA,MALZ;AAMDS,UAAAA,KAAK,EAAE,KAAKA;AANX,WAOE,KAAKoB,KAPP,CADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAYK,KAAKG,KAAL,CAAWC,QAZhB,CADJ;AAiBH;AAzGL;;AAAA;AAAA,EAAwClD,SAAxC;AA6GA,OAAO,IAAMmD,YAAY,GAAG,SAAfA,YAAe,CAAAnD,SAAS,EAAI;AACrC,SAAO,UAAAiD,KAAK,EAAI;AACZ,WACI,oBAAC,UAAD,CAAY,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,UAAAG,WAAW,EAAI;AACX,aACI,oBAAC,SAAD,oBACQA,WADR,EAEQH,KAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ;AAMH,KATT,CADJ;AAcH,GAfD;AAgBH,CAjBM","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\n\nconst scoreAxios = axios.create();\n\ntodoAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem('token')\n    config.headers.Authorization = `Bearer ${token}`\n    return config\n})\n\nconst AppContext = React.createContext();\n\nexport class AppContextProvider extends Component {\n    constructor() {\n        super()\n        this.state = {\n            scores: [],\n            user: JSON.parse(localStorage.getItem('user')) || {},\n            token: localStorage.getItem('token') || ''\n        }\n    }\n\n    componentDidMount() {\n        this.getTodos();\n    }\n\n    signup = userInfo => {\n        return axios.post('/auth/signup', userInfo)\n            .then(response => {\n                const { user, token } = response.data\n                localStorage.setItem('user', user)\n                localStorage.setItem('token', token)\n                this.setState({\n                    user,\n                    token\n                })\n                return response\n            })\n        }\n\n    login = credentials => {\n        return axios.post('auth/login', credentials)\n            .then(response => {\n                const {token, user} = response.data\n                localStorage.setItem('user', JSON.stringify(user))\n                localStorage.setItem('token', token)\n                this.setState({\n                    user,\n                    token\n                })\n                this.getTodos();\n                return response\n            })\n    }\n\n    getTodos = () => {\n        return todoAxios.get(\"/api/todo\")\n            .then(response => {\n                this.setState({ todos: response.data });\n                return response;\n            })\n    }\n\n    addTodo = (newTodo) => {\n        return todoAxios.post(\"/api/todo/\", newTodo)\n            .then(response => {\n                this.setState(prevState => {\n                    return { todos: [...prevState.todos, response.data] }\n                });\n                return response;\n            })\n    }\n\n    editTodo = (todoId, todo) => {\n        return todoAxios.put(`/api/todo/${todoId}`, todo)\n            .then(response => {\n                this.setState(prevState => {\n                    const updatedTodos = prevState.todos.map(todo => {\n                        return todo._id === response.data._id ? response.data : todo\n                    })\n                    return { todos: updatedTodos }\n                })\n                return response;\n            })\n    }\n\n    deleteTodo = (todoId) => {\n        return todoAxios.delete(`/api/todo/${todoId}`)\n            .then(response => {\n                this.setState(prevState => {\n                    const updatedTodos = prevState.todos.filter(todo => {\n                        return todo._id !== todoId\n                    })\n                    return { todos: updatedTodos }\n                })\n                return response;\n            })\n    }\n\n    render() {\n        return (\n            <AppContext.Provider\n                value={{\n                    getTodos: this.getTodos,\n                    addTodo: this.addTodo,\n                    editTodo: this.editTodo,\n                    deleteTodo: this.deleteTodo,\n                    signup: this.signup,\n                    login: this.login,\n                    ...this.state\n                }}\n            >\n\n                {this.props.children}\n\n            </AppContext.Provider>\n        )\n    }\n}\n\n\nexport const withProvider = Component => {\n    return props => {\n        return (\n            <AppContext.Consumer>\n                {\n                    globalState => {\n                        return (\n                            <Component\n                                {...globalState}\n                                {...props}\n                            />\n                        )\n                    }\n                }\n            </AppContext.Consumer>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}